<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>History Art QuizBot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      margin: 0;
      padding: 0;
    }
    #chat {
      max-width: 900px;
      margin: 20px auto;
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      height: 90vh;
    }
    #messages {
      flex: 1;
      overflow-y: auto;
      padding-bottom: 10px;
    }
    .msg {
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 12px;
      max-width: 75%;
      line-height: 1.4em;
      white-space: pre-wrap;
    }
    .bot {
      background: #e0e7ff;
      text-align: left;
    }
    .user {
      background: #c7f9cc;
      text-align: right;
      margin-left: auto;
    }
    #inputArea {
      display: flex;
      margin-top: 10px;
    }
    #userInput {
      flex: 1;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      border: none;
      background: #4a90e2;
      color: #fff;
      border-radius: 5px;
      margin-left: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #357abd;
    }
    .detail-btn {
      display: inline-block;
      margin-top: 5px;
      padding: 3px 8px;
      font-size: 0.9em;
      background: #ddd;
      border-radius: 6px;
      cursor: pointer;
    }
    .detail-btn:hover {
      background: #bbb;
    }
  </style>
</head>
<body>
  <div id="chat">
    <div id="messages"></div>
    <div id="inputArea">
      <input type="text" id="userInput" placeholder="Введите ответ или вопрос...">
      <button onclick="sendMessage()">Отправить</button>
    </div>
  </div>
<script>
const messages = document.getElementById("messages");

function addMessage(text, sender) {
  const div = document.createElement("div");
  div.className = "msg " + sender;
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
  return div;
}

// Кнопка "Подробнее"
function addDetailButton(entry) {
  const btn = document.createElement("span");
  btn.textContent = "[Подробнее]";
  btn.className = "detail-btn";
  btn.onclick = () => {
    addMessage(entry.full, "bot");
  };
  messages.lastChild.appendChild(document.createElement("br"));
  messages.lastChild.appendChild(btn);
}

// === БАЗА ЗНАНИЙ ===
// Каждый билет: короткий ответ (short) и развёрнутый (full)
const knowledgeBase = [
  {
    key: "первобытное искусство",
    short: "Первобытное искусство связано с охотой и ритуалами. Характерны пещерные рисунки животных и статуэтки женщин.",
    full: `Билет 1. Искусство первобытного мира
Периодизация: Палеолит, Мезолит, Неолит, Энеолит.
Примеры: «Виллендорфская Венера», бизоны из пещеры Альтамира, Стоунхендж.
Особенности: пещерные росписи Франции и Испании, первые попытки композиции, культ предков.`
  },
  {
    key: "египет",
    short: "Искусство Египта связано с культом загробной жизни. Основные памятники — пирамиды и храмы.",
    full: `Билет 2. Искусство Древнего Египта
Периоды: Раннее царство, Древнее, Среднее, Новое, Позднее.
Памятники: пирамиды в Гизе, храм в Луксоре, храм Абу-Симбел.
Особенности: канон пропорций, иероглифическая роспись, связь искусства с религией.`
  },
  {
    key: "месопотамия",
    short: "Искусство Месопотамии связано с храмами-зиккуратами и рельефами царской власти.",
    full: `Билет 3. Искусство Древней Месопотамии
Памятники: Зиккурат в Уре, Стела Хаммурапи, ворота Иштар, висячие сады.
Особенности: культ богов, развитие рельефа, использование кирпича, декоративность.`
  },
  {
    key: "древняя греция",
    short: "Искусство Древней Греции прошло этапы архаики, классики и эллинизма. Вершина — Парфенон.",
    full: `Билеты 4–5. Искусство Древней Греции
Архаика: куросы и коры.
Классика: Фидий, Парфенон, Дискобол Мирона.
Эллинизм: Лаокоон, Венера Милосская, театр в Эпидавре.`
  },
  {
    key: "рим",
    short: "Искусство Древнего Рима — монументальное, практичное. Характерны дороги, арки, акведуки.",
    full: `Билеты 6–7. Искусство Древнего Рима
Памятники: Колизей, Пантеон, арка Тита, термы Каракаллы.
Особенности: реализм портретов, инженерные достижения, мозаика.`
  },
  {
    key: "византия",
    short: "Искусство Византии объединяет античные традиции и христианскую символику.",
    full: `Билет 9. Искусство Византии
Памятники: храм Святой Софии в Константинополе, мозаики Равенны.
Особенности: иконопись, золотой фон, символизм.`
  },
  {
    key: "ренессанс",
    short: "Эпоха Возрождения — расцвет гуманизма и реалистичного искусства.",
    full: `Билет 14. Искусство Ренессанса
Художники: Леонардо да Винчи, Рафаэль, Микеланджело.
Памятники: Сикстинская капелла, «Тайная вечеря», «Афинская школа».
Особенности: перспектива, гармония пропорций, интерес к человеку.`
  }
{
  key: "первобытное искусство",
  short: "Первобытное искусство связано с охотой и ритуалами. Характерны пещерные рисунки животных и статуэтки женщин.",
  full: `Билет 1. Искусство первобытного мира

Периодизация: Палеолит, Мезолит, Неолит, Энеолит.

Палеолит. Примерами первых произведений являются рисунки животных и фигурки женщин («Виллендорфская Венера»). Охота играла центральную роль, изображения зверей — в пещерных росписях (Альтамира, Ласко). Скульптура из камня и кости, орнаменты. 

Мезолит. Возникают селения, появляются петроглифы, развивается орнамент. Центральная тема искусства — деятельность человека (охота, войны).

Неолит. Архитектура: мегалиты (менгиры, дольмены, кромлехи). Пример — Стоунхендж. Развиваются глиняные сосуды с орнаментом, каменные стелы, культ предков.

Энеолит. Развиваются художественные ремёсла: золотые украшения, бронзовые ножи с фигурками животных. Появление сюжетной композиции.`
},
{
  key: "египет",
  short: "Искусство Египта связано с культом загробной жизни. Основные памятники — пирамиды и храмы.",
  full: `Билет 2. Периодизация истории искусства Древнего Египта

Периоды: Раннее царство, Древнее, Среднее, Новое, Позднее.

Характерные черты: монументальная архитектура, культ загробной жизни, связь с религией. Канон пропорций в скульптуре, иероглифическая роспись.

Памятники: пирамиды в Гизе, храм в Луксоре, храм Абу-Симбел, статуи фараонов, Сфинкс.

Особенности: строгая симметрия, устойчивость форм, культ божественного царя.`
},
{
  key: "месопотамия",
  short: "Искусство Месопотамии связано с храмами-зиккуратами и рельефами царской власти.",
  full: `Билет 3. Периодизация истории искусства Древней Месопотамии

Архитектура: зиккураты (пример — в Уре), дворцы. 

Скульптура: стела коршунов, статуи Гудеа, рельефы ассирийских дворцов. Культ богов, символика царской власти.

Живопись и прикладное искусство: мозаики, панно, глазурованный кирпич. 

Памятники: Ворота Иштар, Висячие сады Вавилона, стела Хаммурапи. 

Особенности: монументальность, декоративность, развитие рельефа.`
}
  // … остальные билеты можно добавить аналогично
];

// === ВИКТОРИНА ===
const quizQuestions = [
  { q: "В какой эпохе появилась «Виллендорфская Венера»?", a: "палеолит" },
  { q: "Как называется мегалитическое сооружение в Англии?", a: "стоунхендж" },
  { q: "Какая цивилизация построила пирамиды в Гизе?", a: "египет" },
  { q: "Как назывался многоступенчатый храм в Месопотамии?", a: "зиккурат" },
  { q: "К какому периоду относится Парфенон?", a: "древняя греция" },
  { q: "Какой римский памятник был ареной гладиаторских боёв?", a: "колизей" },
  { q: "Главный храм Византии?", a: "софия" },
  { q: "Кто написал «Тайную вечерю»?", a: "леонардо" }
];

let currentQuestion = null;

// === ФУНКЦИИ ===
function startQuiz() {
  currentQuestion = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
  addMessage("Вопрос: " + currentQuestion.q, "bot");
}

function sendMessage() {
  const input = document.getElementById("userInput");
  const text = input.value.trim().toLowerCase();
  if (!text) return;
  addMessage(text, "user");
  input.value = "";

  // Поиск в базе знаний
  let found = knowledgeBase.find(entry => text.includes(entry.key));
  if (found) {
    addMessage(found.short, "bot");
    addDetailButton(found);
    return;
  }

  // Проверка ключевых слов (что, кто, когда и т.д.)
  const keywords = ["что", "кто", "когда", "где", "как", "почему", "особенности", "характеристика", "значение"];
  if (keywords.some(kw => text.startsWith(kw) || text.includes(kw))) {
    let entry = knowledgeBase.find(e => text.includes(e.key));
    if (entry) {
      addMessage(entry.short, "bot");
      addDetailButton(entry);
      return;
    }
  }

  // Проверка викторины
  if (currentQuestion) {
    if (text.includes(currentQuestion.a)) {
      addMessage("Верно! 🎉", "bot");
      setTimeout(startQuiz, 1000);
    } else {
      addMessage("Не совсем. Правильный ответ: " + currentQuestion.a, "bot");
      setTimeout(startQuiz, 1500);
    }
  } else {
    startQuiz();
  }
}

// === Запуск ===
addMessage("Привет! 🎨 Я чат-бот по истории искусства. Задавай вопросы или начнём викторину!", "bot");
startQuiz();
</script>
</body>
</html>
